<div>
  <h2>WRAMTAS Student Board 2017-2018 Candidates</h2>
  <!-- Approved applications -->
  <div ng-repeat="(id, candidateGroup) in candidates | groupBy:'position'">
    <h3>Running for {{positions[id]}}:</h3>
    <div class="candidate-box" ng-repeat="candidate in candidateGroup | filter:approvedAndSubmitted">
      <h4 class="text-center">{{candidate.name}}</h4>
      <div ng-bind-html="trustAsHtml(candidate.bio)"></div>
    </div>
  </div>
  <hr/>
  <!-- Pending approval -->
  <div ng-show="isAdmin()">
    <h2>Applications Pending Approval</h2>
    <div ng-repeat="(id, candidateGroup) in candidates | groupBy:'position'">
      <h3>Applying for {{positions[id]}}:</h3>
      <div class="candidate-box" ng-repeat="candidate in candidateGroup | filter:notApprovedAndSubmitted">
        <h4 class="text-center">{{candidate.name}}</h4>
        <div ng-bind-html="trustAsHtml(candidate.bio)"></div>
        <button class="btn btn-success" ng-click="approveApplication(candidate)">Approve</button>
        <button class="btn btn-danger" ng-click="toggleReject(candidate)">{{rejectButtonText(candidate)}}</button>
        <span class="form-inline" ng-show="showRejectReason(candidate)">
        <input type="text" class="form-control rejection-box" placeholder="Reason for rejecting..." ng-model="candidate.reason" />
        <button class="btn btn-danger" ng-click="rejectApplication(candidate)">Reject</button>
        </span>
      </div>
    </div>
    <br/>
  </div>
</div>
