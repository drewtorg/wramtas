<div class="modal-body">
  <h2>Master Class Survey
    <button ng-show="isAdmin()"
            class="pull-right btn btn-primary"
            ng-click="toggleUserMode()">
      <span ng-if="!userMode">Show User View</span>
      <span ng-if="userMode">Show Admin View</span>
    </button>
  </h2>
  <div ng-if="isAdmin() && !userMode">
    <div class="survey-question" ng-repeat="s in survey">
      <div class="row">
        <div class="col-sm-7">
          <span>#{{$index + 1}}.</span>
          <input type="text"
                class="form-control survey-input"
                ng-model="s.question"
                placeholder="Question"/>
        </div>
        <div class="col-sm-4">
          <select class="form-control" ng-model="s.inputType">
            <option value="text">Short Answer</option>
            <option value="textarea">Paragraph</option>
            <option value="radio">Multiple Choice</option>
            <option value="checkbox">Checkboxes</option>
            <option value="select">Dropdown</option>
          </select>
        </div>
        <div class="col-sm-1">
          <div class="delete-symbol">
            <span class="glyphicon glyphicon-remove"
                  ng-click="deleteQuestion($index)"></span>
          </div>
        </div>
      </div>
      <div ng-if="allowCreateResponses(s.inputType)">
        <div class="row" ng-repeat="response in s.validOptions track by $index">
          <div class="survey-option col-sm-6">
            <input type="text"
                   class="form-control"
                   ng-model="s.validOptions[$index]"/>
          </div>
          <div class="col-sm-1 no-padding">
            <div class="delete-symbol">
              <span class="glyphicon glyphicon-remove"
                    ng-click="deleteOption(s, $index)"></span>
            </div>
          </div>
        </div>
        <button class="survey-option btn btn-primary"
                ng-click="addOption(s)">
          Add Option <span class="glyphicon glyphicon-plus">
        </button>
      </div>
    </div>
    <div class="margin-top">
      <button class="btn btn-primary"
              ng-click="addQuestion()">
        Add Question <span class="glyphicon glyphicon-plus"></span>
      </button>
      <button class="btn btn-success"
              ng-click="$close(survey)">
        Save <span class="glyphicon glyphicon-floppy-disk"></span>
      </button>
      <button class="btn btn-danger"
              ng-click="$dismiss('canceled')">
        Cancel <span class="glyphicon glyphicon-remove"></span>
      </button>
    </div>
  </div>
  <div ng-if="!isAdmin() || isAdmin() && userMode">
    <div ng-repeat="s in survey">
      <p>#{{$index + 1}}. {{s.question}}</p>
      <div ng-if="s.inputType === 'text'">
        <input type="text"
              class="form-control"
              ng-model="responses[$index]"/>
      </div>
      <div ng-if="s.inputType === 'textarea'">
        <textarea class="form-control survey-paragraph"
                  ng-model="responses[$index]">
        </textarea>
      </div>
      <div ng-if="s.inputType === 'radio'">
        <div ng-repeat="option in s.validOptions">
          <input type="radio"
                 name="{{s.question}}"
                 value="{{$index}}"
                 ng-model="responses[$parent.$index]">
            {{option}}
          </input>
        </div>
      </div>
      <div ng-if="s.inputType === 'checkbox'">
        <div ng-repeat="option in s.validOptions">
          <input type="checkbox"
                 name="{{s.question}}"
                 ng-model="responses[$parent.$index][$index]">
            {{option}}
          </input>
        </div>
      </div>
      <div ng-if="s.inputType === 'select'">
        <select class="form-control"
                ng-model="responses[$index]"
                ng-options="s.validOptions.indexOf(selected) as selected for selected in s.validOptions">
        </select>
      </div>
      <hr/>
    </div>
    <button class="btn btn-success"
            ng-click="saveSurvey()"
            ng-disabled="isAdmin()">Submit</button>
    <button class="btn btn-danger"
            ng-click="$dismiss('canceled')"
            ng-disabled="isAdmin()">Cancel</button>
  </div>
</div>
